"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[119],{22893:function(ie,N,r){r.r(N),r.d(N,{default:function(){return ne}});var V=r(15009),p=r.n(V),k=r(99289),E=r.n(k),L=r(97857),l=r.n(L),z=r(5574),H=r.n(z),Y=r(67294),T=r(35740),C=r(45673),K=r(97448),q=r(12121),Q=r(95927),W=r(85402),x=r(83097),M=r(27049),B=r(71577),X=r(87588),w=r(51042),_=r(30381),$=r.n(_),y=r(96365),U=r(40038),o=r(13878),ee=r(49522),Z=r(71230),h=r(15746),A=r(61476),e=r(85893),O=y.Z.TextArea,S=U.Z.Option,G={validator:function(s,g){if(!g)return Promise.resolve();try{JSON.parse(g)}catch(v){return Promise.reject(v)}return Promise.resolve()}},re=function(m){var s=m.record,g=m.visible,v=m.onVisibleChange,I=m.onUpdate,P=o.Z.useForm(),R=H()(P,1),c=R[0];return(0,Y.useEffect)(function(){var t,a;c.setFieldsValue(l()(l()(l()({},s),s.request),{},{startTime:s.startTime?$()(s.startTime):null,endTime:s.endTime?$()(s.endTime):null,headers:(t=s.request)!==null&&t!==void 0&&t.headers?JSON.stringify(s.request.headers):null,parameters:(a=s.request)!==null&&a!==void 0&&a.parameters?JSON.stringify(s.request.parameters):null}))},[s]),(0,e.jsx)(ee.Z,{forceRender:!0,title:s.id?"\u7F16\u8F91\u4EFB\u52A1":"\u65B0\u589E\u4EFB\u52A1",width:600,onClose:function(){v(!1),c.resetFields()},visible:g,bodyStyle:{paddingBottom:80},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(B.Z,{onClick:function(){return v(!1)},style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(B.Z,{onClick:function(){c.submit()},type:"primary",children:"\u786E\u8BA4"})]}),children:(0,e.jsxs)(o.Z,{requiredMark:!1,layout:"vertical",form:c,onFinish:function(){var t=E()(p()().mark(function a(i){var f,j,F;return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,T.request)("/",{skipErrorHandler:!0,method:s.id?"put":"post",params:{id:s.id},data:l()(l()({},i),{},{startTime:i.startTime?i.startTime.format("YYYY-MM-DD HH:mm:ss"):void 0,endTime:i.endTime?i.endTime.format("YYYY-MM-DD HH:mm:ss"):void 0,request:l()(l()({},i),{},{headers:i.headers?JSON.parse(i.headers):null,parameters:i.parameters?JSON.parse(i.parameters):null})})});case 2:f=n.sent,j=f.success,F=f.message,j?(I(),v(!1),c.resetFields()):x.ZP.error(F);case 6:case"end":return n.stop()}},a)}));return function(a){return t.apply(this,arguments)}}(),children:[(0,e.jsxs)(Z.Z,{gutter:16,children:[(0,e.jsx)(h.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"name",label:"\u4EFB\u52A1\u540D\u79F0",rules:[{required:!0}],children:(0,e.jsx)(y.Z,{})})}),(0,e.jsx)(h.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"group",label:"\u4EFB\u52A1\u5206\u7EC4",children:(0,e.jsx)(y.Z,{})})})]}),(0,e.jsx)(Z.Z,{gutter:16,children:(0,e.jsx)(h.Z,{span:18,children:(0,e.jsx)(o.Z.Item,{name:"cron",label:"\u6267\u884C\u9891\u7387(CRON)",rules:[{required:!0}],children:(0,e.jsx)(y.Z,{})})})}),(0,e.jsxs)(Z.Z,{gutter:16,children:[(0,e.jsx)(h.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"startTime",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,e.jsx)(A.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})})}),(0,e.jsx)(h.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"endTime",label:"\u7ED3\u675F\u65F6\u95F4",children:(0,e.jsx)(A.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})})})]}),(0,e.jsxs)(Z.Z,{gutter:16,children:[(0,e.jsx)(h.Z,{span:18,children:(0,e.jsx)(o.Z.Item,{name:"url",label:"\u8BF7\u6C42URL",rules:[{required:!0}],children:(0,e.jsx)(y.Z,{})})}),(0,e.jsx)(h.Z,{span:6,children:(0,e.jsx)(o.Z.Item,{name:"method",label:"METHOD",rules:[{required:!0}],children:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(S,{value:"GET",children:"GET"}),(0,e.jsx)(S,{value:"POST",children:"POST"}),(0,e.jsx)(S,{value:"PUT",children:"PUT"}),(0,e.jsx)(S,{value:"DELETE",children:"DELETE"})]})})})]}),(0,e.jsx)(Z.Z,{gutter:16,children:(0,e.jsx)(h.Z,{span:18,children:(0,e.jsx)(o.Z.Item,{hasFeedback:!0,name:"headers",label:"\u8BF7\u6C42\u5934",rules:[G],children:(0,e.jsx)(O,{rows:5})})})}),(0,e.jsx)(Z.Z,{gutter:16,children:(0,e.jsx)(h.Z,{span:18,children:(0,e.jsx)(o.Z.Item,{hasFeedback:!0,name:"parameters",label:"\u8BF7\u6C42\u53C2\u6570",rules:[G],children:(0,e.jsx)(O,{rows:5})})})}),(0,e.jsx)(Z.Z,{gutter:16,children:(0,e.jsx)(h.Z,{span:18,children:(0,e.jsx)(o.Z.Item,{name:"body",label:"\u8BF7\u6C42BODY",children:(0,e.jsx)(O,{rows:5})})})})]})})},se=function(s){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(C.vY,{column:3,children:[(0,e.jsx)(C.vY.Item,{label:"\u8BF7\u6C42\u65B9\u6CD5",children:s.request.method}),(0,e.jsx)(C.vY.Item,{label:"\u8BF7\u6C42\u5730\u5740",children:s.request.url}),s.request.parameters&&(0,e.jsx)(C.vY.Item,{label:"\u8BF7\u6C42\u53C2\u6570",children:JSON.stringify(s.request.parameters)}),s.request.headers&&(0,e.jsx)(C.vY.Item,{label:"\u8BF7\u6C42\u5934",children:JSON.stringify(s.request.headers)}),s.request.body&&(0,e.jsx)(C.vY.Item,{label:"\u63D0\u4EA4\u5185\u5BB9",children:s.request.body})]})})},ne=function(){var m=(0,Y.useRef)(),s=(0,Y.useState)({visible:!1,record:{},onVisibleChange:function(t){I(l()(l()({},v),{},{visible:t}))},onUpdate:function(){var t;(t=m.current)===null||t===void 0||t.reload()}}),g=H()(s,2),v=g[0],I=g[1],P=function(t){return(0,e.jsx)(K.Z,{onSelect:function(){var a=E()(p()().mark(function i(f){var j,F;return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f!=="delete"){n.next=4;break}W.Z.confirm({title:"\u786E\u5B9A\u5220\u9664\u4EFB\u52A1\u5417?",icon:(0,e.jsx)(X.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D",onOk:function(){var J=E()(p()().mark(function ae(){var D,b;return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,(0,T.request)("/",{skipErrorHandler:!0,method:"delete",params:{id:t.id}});case 3:D=d.sent,D.success?(b=m.current)===null||b===void 0||b.reload():x.ZP.error(D.errorMessage),d.next=10;break;case 7:d.prev=7,d.t0=d.catch(0),x.ZP.error(d.t0 instanceof Error?d.t0.message:String(d.t0));case 10:case"end":return d.stop()}},ae,null,[[0,7]])}));function te(){return J.apply(this,arguments)}return te}(),onCancel:function(){}}),n.next=15;break;case 4:if(f!=="trigger"){n.next=15;break}return n.prev=5,n.next=8,(0,T.request)("/trigger",{skipErrorHandler:!0,method:"get",params:{id:t.id}});case 8:j=n.sent,j.success?(F=m.current)===null||F===void 0||F.reload():x.ZP.error(j.errorMessage),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),x.ZP.error(n.t0 instanceof Error?n.t0.message:String(n.t0));case 15:case"end":return n.stop()}},i,null,[[5,12]])}));return function(i){return a.apply(this,arguments)}}(),menus:[{key:"trigger",name:"\u6267\u884C"},{key:"delete",name:"\u5220\u9664"}]},"actionGroup")},R=[{title:"\u5206\u7EC4",dataIndex:"group"},{title:"\u540D\u79F0",dataIndex:"name"},{hideInSearch:!0,title:"\u72B6\u6001",dataIndex:"status"},{hideInSearch:!0,title:"\u6267\u884C\u9891\u7387",dataIndex:"cron"},{hideInSearch:!0,title:"\u8BF7\u6C42\u65B9\u6CD5",dataIndex:"httpMethod"},{hideInSearch:!0,title:"\u8BF7\u6C42\u5730\u5740",dataIndex:"httpURL"},{hideInSearch:!0,title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"startTime"},{hideInSearch:!0,title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endTime"},{hideInSearch:!0,title:"\u64CD\u4F5C",render:function(t,a){return(0,e.jsxs)(e.Fragment,{children:[(a.status==="RUNNING"||a.status==="PAUSE")&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:E()(p()().mark(function i(){var f,j;return p()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,T.request)(a.status==="RUNNING"?"/pause":"/resume",{skipErrorHandler:!0,method:"put",params:{id:a.id}});case 3:f=u.sent,f.success?(j=m.current)===null||j===void 0||j.reload():x.ZP.error(f.errorMessage),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),x.ZP.error(u.t0 instanceof Error?u.t0.message:String(u.t0));case 10:case"end":return u.stop()}},i,null,[[0,7]])})),children:a.status==="RUNNING"?"\u6682\u505C":"\u6062\u590D"},"1"),(0,e.jsx)(M.Z,{type:"vertical"})]}),(0,e.jsx)("a",{onClick:function(){I(l()(l()({},v),{},{visible:!0,record:a}))},children:"\u7F16\u8F91"},"2"),(0,e.jsx)(M.Z,{type:"vertical"}),P(a)]})}}];return(0,e.jsx)("div",{children:(0,e.jsxs)(q._z,{children:[(0,e.jsx)(Q.Z,{bordered:!0,columns:R,request:function(t){return(0,T.request)("/",{params:l()({},t)})},rowKey:"id",search:{filterType:"light"},dateFormatter:"string",headerTitle:"\u4EFB\u52A1\u5217\u8868",actionRef:m,cardProps:{bodyStyle:{paddingBottom:"25px"}},expandable:{expandedRowRender:se},toolBarRender:function(){return[(0,e.jsxs)(B.Z,{type:"primary",onClick:function(){return I(l()(l()({},v),{},{record:{},visible:!0}))},children:[(0,e.jsx)(w.Z,{}),"\u65B0\u589E"]},"primary")]},style:{minHeight:"650px"}}),(0,e.jsx)(re,l()({},v),"edit")]})})}}}]);
